(this["webpackJsonpimgs-client"]=this["webpackJsonpimgs-client"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,a,t){e.exports=t(34)},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),r=t(5),l=t.n(r),c=(t(19),t(13)),s=(t(20),t(21),t(2)),o={hot:"hot",top:"top",user:"user"},m={viral:"viral",top:"top",time:"time",rising:"rising"},g={day:"day",week:"week",month:"month",year:"year",all:"all"},u=function(e){return{type:"SET_PAGE",payload:e}},p=function(e){return{type:"SHOW_BIG_IMAGE",payload:e}},d=function(e){return{type:"SET_BIG_IMAGE_INDEX",payload:e}};var b={setSection:function(e){return{type:"SET_SECTION",payload:e}},setSort:function(e){return{type:"SET_SORT_TYPE",payload:e}},setWindow:function(e){return{type:"SET_WINDOW",payload:e}},setPage:u,setShowViral:function(e){return{type:"SET_SHOW_VIRAL",payload:e}}},E=Object(s.b)((function(e){return{page:e.galleryPrefs.page,sort:e.galleryPrefs.sort,section:e.galleryPrefs.section,showViral:e.galleryPrefs.showViral}}),b)((function(e){var a=e.page,t=e.section,n=e.sort,r=e.showViral,l=e.setSection,c=e.setSort,s=e.setWindow,u=e.setPage,p=e.setShowViral;return i.a.createElement("section",{"data-testid":"main-section",className:"gallery-prefs"},i.a.createElement("div",{className:"gallery-pref-page-display"},i.a.createElement("p",null,"page ".concat(a+1)),Array(a+1).fill().map((function(e,a){return i.a.createElement("div",{key:a,className:"page-indicator"})}))),i.a.createElement("div",{className:"gallery-pref-sections"},Object.values(o).map((function(e,a){return i.a.createElement("button",{key:a,onClick:function(){return function(e,a){e!==o.user&&a===m.rising&&c(m.viral),e!==o.top&&s(null),u(0),l(e)}(e,n)},className:t===e?"active-section":null},e)})),i.a.createElement("div",{id:"selected-"+t,className:"active-section-indicator"})),i.a.createElement("div",{className:"gallery-pref-options"},i.a.createElement("label",null,i.a.createElement("span",{className:"select-name"},"sort:"),i.a.createElement("select",{name:"sort",id:"sort-types",onChange:function(e){return c(e.target.value)}},Object.values(m).map((function(e,a){return e===m.rising&&t!==o.user?null:i.a.createElement("option",{key:a,value:e},e)})))),t===o.top&&i.a.createElement("label",null,i.a.createElement("span",{className:"select-name"},"window:"),i.a.createElement("select",{name:"window",id:"windows",onChange:function(e){return s(e.target.value)}},Object.values(g).map((function(e,a){return i.a.createElement("option",{key:a,value:e},e)})))),i.a.createElement("label",null,i.a.createElement("input",{id:"viral-switch",name:"viral",type:"checkbox",checked:r,onChange:function(){return p(!r)}}),i.a.createElement("span",{className:"checkbox-slider"}),i.a.createElement("span",{className:"checkbox-name"},"viral"))))})),f=(t(28),t(3));t(29);var I={showBigImage:p,setBigImageIndex:d},v=Object(s.b)((function(e){return{images:e.galleryPrefs.images}}),I)((function(e){var a=e.images,t=e.imageIndex,n=e.setBigImageIndex,r=e.showBigImage,l=a[t],c=l.title,s=l.description,o=l.images[0].link,m=o.slice(-3);function g(){n(t),r(!0)}return c=c&&c.length>70?c.slice(0,70).concat("..."):c,s=s&&s.length>70?s.slice(0,70).concat("..."):s,i.a.createElement(i.a.Fragment,null,i.a.createElement("article",{className:"image-thumbnail"},i.a.createElement(f.b.div,{className:"image-wrapper",initial:{scale:.2,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.1*t}},exit:{scale:.2,opacity:0}},i.a.createElement("p",{"data-testid":"image-description"},s||c),"mp4"===m?i.a.createElement("video",{src:o,onClick:g}):i.a.createElement("img",{src:o,alt:c,onClick:g}))))})),y=(t(30),{initial:{x:300,position:"absolute",opacity:0},animate:{x:0,position:"static",opacity:1},exit:{x:-300,position:"absolute",opacity:0}});var w={showBigImage:p},O=Object(s.b)((function(e){return{images:e.galleryPrefs.images,bigImageIndex:e.bigImage.bigImageIndex}}),w)((function(e){var a=e.images,t=e.bigImageIndex,r=e.showBigImage,l=a[t],c=l.title,s=l.description,o=l.score,m=l.ups,g=l.downs,u=l.images[0].link,p=u.slice(-3);return Object(n.useEffect)((function(){window.scroll({top:0,left:0})}),[]),i.a.createElement("div",{className:"big-image"},i.a.createElement("button",{onClick:function(){return r(!1)}},"back to gallery"),i.a.createElement("div",{className:"big-image-wrapper"},"mp4"===p?i.a.createElement(f.a,null,i.a.createElement(f.b.video,{controls:!0,initial:"initial",animate:"animate",exit:"exit",variants:y,src:u})):i.a.createElement(f.a,null,i.a.createElement(f.b.img,{key:u,src:u,alt:c,initial:"initial",animate:"animate",exit:"exit",variants:y}))),i.a.createElement("ul",null,c&&i.a.createElement("li",null,"Title: ",i.a.createElement("span",null,c)),s&&i.a.createElement("li",null,"Description:",i.a.createElement("span",null,s)),i.a.createElement("li",null,"Upvotes: ",i.a.createElement("span",null,m)),i.a.createElement("li",null,"Downvotes: ",i.a.createElement("span",null,g)),i.a.createElement("li",null,"Score: ",i.a.createElement("span",null,o))))}));var h={showBigImage:p,setBigImageIndex:d},x=Object(s.b)((function(e){var a=e.galleryPrefs.images,t=e.bigImage;return{images:a,bigImageOpen:t.bigImageOpen,bigImageIndex:t.bigImageIndex}}),h)((function(e){var a=e.images,t=e.bigImageOpen,r=e.bigImageIndex,l=e.loading,c=Object(n.useMemo)((function(){return a&&a.map((function(e,a){return i.a.createElement(v,{key:a,imageIndex:a})}))}),[a]);return i.a.createElement("section",{"data-testid":"main-section",className:l?"gallery gallery-loading":"gallery"},t&&null!==r?i.a.createElement(O,{index:r}):i.a.createElement(i.a.Fragment,null,c))}));t(31);var S={setPage:u,setBigImageIndex:d},j=Object(s.b)((function(e){return{images:e.galleryPrefs.images,page:e.galleryPrefs.page,bigImageOpen:e.bigImage.bigImageOpen,bigImageIndex:e.bigImage.bigImageIndex}}),S)((function(e){var a=e.images,t=e.page,n=e.bigImageOpen,r=e.bigImageIndex,l=e.setPage,c=e.setBigImageIndex;return i.a.createElement("nav",{className:"navigation"},i.a.createElement("button",{id:"nav-back-button","data-testid":"nav-back-button",onClick:function(){n?c(r-1):l(t-1)},disabled:n?0===r:0===t}),i.a.createElement("button",{id:"nav-next-button","data-testid":"nav-next-button",onClick:function(){n&&r<a.length-1?c(r+1):n?(l(t+1),c(0)):l(t+1)}}))}));t(32);var N=function(){return i.a.createElement("article",{className:"loading-icon"},i.a.createElement("div",{className:"lds-bg"}),i.a.createElement("div",{className:"lds-ring"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)))},k=t(9),_=t.n(k),T=t(12);function P(){return(P=Object(T.a)(_.a.mark((function e(a){var t,n,i,r,l,c,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.section,n=a.sort,i=a.window,r=a.page,l=a.showViral,e.next=3,fetch("/api/get-images-from-imgur",{method:"POST",body:JSON.stringify({section:t,showViral:l,sort:n,window:i,page:r})});case 3:return c=e.sent,e.next=6,c.json();case 6:return s=e.sent,e.abrupt("return",s.filter((function(e){return e.images&&1===e.images.length})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B={setImages:function(e){return{type:"SET_IMAGES",payload:e}}},V=Object(s.b)((function(e){var a=e.galleryPrefs;return{section:a.section,sort:a.sort,page:a.page,window:a.window,showViral:a.showViral,bigImageOpen:e.bigImage.bigImageOpen}}),B)((function(e){var a=e.section,t=e.sort,r=e.page,l=e.window,s=e.showViral,o=e.bigImageOpen,m=e.setImages,g=Object(n.useState)(!0),u=Object(c.a)(g,2),p=u[0],d=u[1];return Object(n.useEffect)((function(){a&&(d(!0),function(e){return P.apply(this,arguments)}({section:a,sort:t,window:l,page:r,showViral:s}).then((function(e){d(!1),m(e)})).catch((function(e){d(!1),console.error("Image retrieval failed!",e)})))}),[a,t,l,r,s,m]),i.a.createElement("main",{className:"app"},!o&&i.a.createElement(E,null),p&&i.a.createElement(N,null),i.a.createElement(x,{loading:p}),i.a.createElement(j,null))})),G=t(4),A=t(1),C={images:[],section:o.hot,sort:m.viral,page:0,window:null,showViral:!0},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"SET_IMAGES":return Object(A.a)(Object(A.a)({},e),{},{images:n});case"SET_SECTION":return Object(A.a)(Object(A.a)({},e),{},{section:n});case"SET_SORT_TYPE":return Object(A.a)(Object(A.a)({},e),{},{sort:n});case"SET_PAGE":return Object(A.a)(Object(A.a)({},e),{},{page:n});case"SET_WINDOW":return Object(A.a)(Object(A.a)({},e),{},{window:n});case"SET_SHOW_VIRAL":return Object(A.a)(Object(A.a)({},e),{},{showViral:n});default:return e}},M={bigImageOpen:!1,bigImageIndex:null},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"SHOW_BIG_IMAGE":return Object(A.a)(Object(A.a)({},e),{},{bigImageOpen:n});case"SET_BIG_IMAGE_INDEX":return Object(A.a)(Object(A.a)({},e),{},{bigImageIndex:n});default:return e}},H=Object(G.b)({bigImage:D,galleryPrefs:W}),R=Object(G.c)(H);l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(s.a,{store:R},i.a.createElement(V,null))),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.e584e6a9.chunk.js.map